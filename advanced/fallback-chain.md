# API 설정 체인

여러 API 설정을 연결하여 안정적인 번역을 보장합니다.

---

## API 설정 체인이란?

첫 번째 API가 실패하면 자동으로 다음 API를 사용하는 시스템입니다.

[사진: API 설정 체인 개념도]

### 동작 예시

```
1. Gemini 2.5 Flash 호출 → 실패 (타임아웃)
2. Gemini 2.5 Pro 호출 → 실패 (할당량 초과)
3. Gemini 2.0 Flash 호출 → 성공!
```

---

## 장점

| 장점 | 설명 |
|------|------|
| **안정성** | API 장애 시에도 서비스 유지 |
| **효율성** | 빠른 API 우선 사용 |
| **비용 관리** | 저렴한 API 우선 사용 가능 |

---

## 설정 위치

1. 설정 열기
2. "API 설정" 섹션

[사진: API 설정 진입]

---

## API 설정 체인 구성

### 카테고리별 설정

Transy는 용도별로 API 설정 체인을 구성합니다.

| 카테고리 | 용도 |
|---------|------|
| **전처리** | 원문 전처리 |
| **번역** | 텍스트 번역 |
| **TTS** | 음성 생성 |
| **유틸리티** | 기타 기능 |

[사진: 카테고리 선택]

---

## 번역 API 설정 체인

### 체인 목록

[사진: 번역 API 설정 체인 목록]

```
1. Gemini 2.5 Flash (기본)
2. Gemini 2.5 Pro
3. Gemini 2.0 Flash
```

### 우선순위 조정

드래그하여 순서를 변경합니다.

[사진: 드래그로 순서 변경]

### 활성화/비활성화

각 API 설정을 켜거나 끌 수 있습니다.

[사진: 토글 스위치]

---

## API 설정 추가

### 새 API 설정 추가

1. "API 추가" 버튼 클릭
2. 모델 선택
3. API 키 선택

[사진: API 추가 다이얼로그]

### 사용 가능한 모델

#### 텍스트 모델 (번역/전처리용)

| 모델 | 특징 |
|------|------|
| **Gemini 2.5 Flash** | 빠르고 경제적 (기본값) |
| **Gemini 2.5 Pro** | 높은 품질 |
| **Gemini 2.5 Flash Lite** | 매우 빠름, 저비용 |
| **Gemini 3.0 Pro Preview** | 최신 (실험적) |
| **Gemini 3.0 Flash Preview** | 최신 (실험적) |
| **Gemini 2.0 Flash** | 안정적 |
| **Gemini 2.0 Flash Lite** | 가벼움 |
| **Gemma 3 27B** | 오픈소스 |

#### TTS 모델 (음성용)

| 모델 | 특징 |
|------|------|
| **Gemini 2.5 Flash TTS** | 기본 TTS (권장) |
| **Gemini 2.5 Pro TTS** | 고품질 TTS |

---

## API 설정 타임아웃

각 API 호출의 타임아웃을 설정합니다.

[사진: API 설정 타임아웃 설정]

### 설정 값

| 설정 | 기본값 | 설명 |
|------|--------|------|
| 개별 타임아웃 | 60초 | 각 API 호출 제한 |
| 전체 타임아웃 | 180초 | 전체 체인 시도 제한 |

---

## API 설정 체인 동작 이해

### 실패 조건

다음 API로 넘어가는 조건:

| 조건 | 설명 |
|------|------|
| 타임아웃 | 응답 시간 초과 |
| 할당량 초과 | API 사용량 한도 도달 |
| 인증 오류 | API 키 문제 |
| 서버 오류 | API 서버 장애 |

### 성공 시

- 첫 번째 성공한 API의 결과 사용
- 이후 API는 호출하지 않음

---

## 권장 구성

### 비용 중심 (무료 티어 최대 활용)

```
1. Gemini 2.5 Flash Lite (가장 저렴)
2. Gemini 2.0 Flash Lite
3. Gemini 2.5 Flash
```

**이런 분께 추천**:
- 무료 티어로 최대한 많이 읽고 싶은 분
- 번역 품질보다 비용이 우선인 분

### 품질 중심

```
1. Gemini 2.5 Pro (고품질)
2. Gemini 3.0 Pro Preview (최신)
3. Gemini 2.5 Flash (백업)
```

**이런 분께 추천**:
- 번역 품질이 가장 중요한 분
- 비용은 크게 신경 쓰지 않는 분

### 균형 (권장)

```
1. Gemini 2.5 Flash (빠름, 무료 티어)
2. Gemini 2.5 Pro (고품질 백업)
3. Gemini 2.0 Flash (최종 백업)
```

**이런 분께 추천**:
- 대부분의 사용자
- 속도와 품질의 균형을 원하는 분

### 안정성 중심

```
1. Gemini 2.5 Flash
2. Gemini 2.0 Flash
3. Gemini 2.0 Flash Lite
```

**이런 분께 추천**:
- 실험적 모델을 피하고 싶은 분
- 안정적인 서비스를 원하는 분

---

## TTS API 설정 체인

TTS도 API 설정 체인을 구성할 수 있습니다.

[사진: TTS API 설정]

### 구성 예시

```
1. Gemini 2.5 Flash TTS (기본)
2. Gemini 2.5 Pro TTS (고품질 백업)
```

> **참고**: Android TTS는 API 설정 체인 대상이 아닙니다. 별도로 설정합니다.

---

## API 설정 체인 로그

### 확인 방법

API 설정 체인이 발생하면 로그에 기록됩니다.

[사진: API 설정 체인 로그]

### 로그 내용

```
[번역] Gemini 2.5 Flash: 타임아웃 (60초)
[번역] Gemini 2.5 Pro: 성공
```

---

## API 키 관리와 연동

### 키별 용도

각 API 키가 어떤 API 설정 체인에서 사용되는지 확인할 수 있습니다.

[사진: API 키 사용처]

### 키 삭제 시 주의

사용 중인 키를 삭제하면 API 설정 체인에서 제외됩니다.

---

## 문제 해결

### 모든 API가 실패함

**확인 사항**:
1. 인터넷 연결
2. API 키 유효성
3. 할당량 확인
4. 타임아웃 설정

### 체인 전환이 너무 느림

**해결**:
1. 개별 타임아웃 줄이기 (예: 60초 → 30초)
2. 안정적인 API를 상위로
3. 불안정한 API 비활성화

### 특정 API만 사용하고 싶음

**해결**:
1. 다른 API 비활성화
2. 또는 체인에서 제거

---

[← 소설별 설정](novel-settings.md) | [다음: API 사용량 모니터링 →](api-usage.md)
